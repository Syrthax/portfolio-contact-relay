<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contact — Sarthak</title>
<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}

:root{
  --font:-apple-system,BlinkMacSystemFont,"Inter","SF Pro Display","Segoe UI",system-ui,sans-serif;
  --bg:#f2f2f7;
  --glass:rgba(255,255,255,.45);
  --glass-border:rgba(255,255,255,.6);
  --glass-shadow:0 8px 40px rgba(0,0,0,.06);
  --text-1:#1d1d1f;
  --text-2:#6e6e73;
  --text-3:#aeaeb2;
  --accent:#0071e3;
  --accent-h:#0077ed;
  --input-bg:rgba(255,255,255,.5);
  --input-border:rgba(0,0,0,.06);
  --input-focus:rgba(0,113,227,.35);
  --toast-ok:rgba(52,199,89,.92);
  --toast-err:rgba(255,59,48,.92);
  --blob-1:#a5b4fc;--blob-2:#f9a8d4;--blob-3:#6ee7b7;--blob-4:#fcd34d;
}
@media(prefers-color-scheme:dark){:root{
  --bg:#000;
  --glass:rgba(44,44,46,.4);
  --glass-border:rgba(255,255,255,.06);
  --glass-shadow:0 8px 40px rgba(0,0,0,.3);
  --text-1:#f5f5f7;
  --text-2:#98989d;
  --text-3:#48484a;
  --accent:#0a84ff;
  --accent-h:#409cff;
  --input-bg:rgba(58,58,60,.35);
  --input-border:rgba(255,255,255,.04);
  --input-focus:rgba(10,132,255,.35);
  --blob-1:#312e81;--blob-2:#831843;--blob-3:#064e3b;--blob-4:#78350f;
}}

html{font-family:var(--font);-webkit-font-smoothing:antialiased}

body{
  min-height:100dvh;
  background:var(--bg);
  color:var(--text-1);
  display:flex;align-items:center;justify-content:center;
  padding:24px;
  overflow-x:hidden;
}

/* ── Animated blobs ── */
.blobs{position:fixed;inset:0;z-index:0;overflow:hidden;pointer-events:none}
.blob{
  position:absolute;
  border-radius:50%;
  filter:blur(100px);
  opacity:.55;
  animation:drift 18s ease-in-out infinite alternate;
}
.blob:nth-child(1){width:420px;height:420px;background:var(--blob-1);top:-10%;left:-5%;animation-duration:20s}
.blob:nth-child(2){width:360px;height:360px;background:var(--blob-2);top:50%;right:-8%;animation-duration:24s;animation-delay:-4s}
.blob:nth-child(3){width:300px;height:300px;background:var(--blob-3);bottom:-5%;left:30%;animation-duration:22s;animation-delay:-8s}
.blob:nth-child(4){width:260px;height:260px;background:var(--blob-4);top:20%;left:55%;animation-duration:26s;animation-delay:-12s}
@keyframes drift{
  0%{transform:translate(0,0) scale(1)}
  33%{transform:translate(60px,-40px) scale(1.08)}
  66%{transform:translate(-30px,50px) scale(.95)}
  100%{transform:translate(40px,30px) scale(1.05)}
}

/* ── Glass card ── */
.card{
  position:relative;z-index:1;
  width:100%;max-width:460px;
  background:var(--glass);
  -webkit-backdrop-filter:blur(48px) saturate(180%);
  backdrop-filter:blur(48px) saturate(180%);
  border:1px solid var(--glass-border);
  border-radius:28px;
  padding:48px 40px;
  box-shadow:var(--glass-shadow),inset 0 1px 0 rgba(255,255,255,.45);
  animation:cardIn .6s cubic-bezier(.16,1,.3,1) both;
}
@keyframes cardIn{from{opacity:0;transform:translateY(20px) scale(.97)}}

.card h1{font-size:28px;font-weight:700;letter-spacing:-.02em;margin-bottom:6px}
.card .sub{font-size:15px;color:var(--text-2);margin-bottom:36px}

/* ── Form ── */
.field{margin-bottom:20px}
.field label{display:block;font-size:13px;font-weight:600;color:var(--text-2);margin-bottom:8px}
.field .opt{font-weight:400;color:var(--text-3)}
.field input,.field textarea{
  width:100%;font-family:var(--font);font-size:15px;color:var(--text-1);
  background:var(--input-bg);
  -webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);
  border:1px solid var(--input-border);border-radius:14px;
  padding:14px 16px;outline:none;resize:vertical;
  transition:border-color .2s,box-shadow .2s;
}
.field input::placeholder,.field textarea::placeholder{color:var(--text-3)}
.field input:focus,.field textarea:focus{border-color:var(--input-focus);box-shadow:0 0 0 3px var(--input-focus)}
.field textarea{min-height:120px}

.turnstile-wrap{margin-bottom:24px}

#submitBtn{
  width:100%;font-family:var(--font);font-size:16px;font-weight:600;
  color:#fff;background:var(--accent);border:none;border-radius:14px;
  padding:16px 24px;cursor:pointer;
  transition:background .2s,transform .1s,opacity .2s;
}
#submitBtn:hover:not(:disabled){background:var(--accent-h)}
#submitBtn:active:not(:disabled){transform:scale(.98)}
#submitBtn:disabled{opacity:.5;cursor:not-allowed}

/* ── Toast ── */
#toasts{
  position:fixed;top:24px;left:50%;transform:translateX(-50%);
  display:flex;flex-direction:column;align-items:center;gap:10px;
  z-index:200;pointer-events:none;
}
.toast{
  padding:14px 28px;border-radius:16px;
  font-family:var(--font);font-size:14px;font-weight:500;color:#fff;
  -webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);
  box-shadow:0 4px 20px rgba(0,0,0,.1);
  opacity:0;transform:translateY(-16px);
  transition:opacity .3s,transform .3s;
  pointer-events:auto;max-width:380px;text-align:center;
}
.toast.show{opacity:1;transform:translateY(0)}
.toast.ok{background:var(--toast-ok)}
.toast.err{background:var(--toast-err)}

/* ── Responsive ── */
@media(max-width:540px){
  body{padding:16px}
  .card{padding:36px 24px;border-radius:24px}
  .card h1{font-size:24px}
}
</style>
</head>
<body>

<div class="blobs">
  <div class="blob"></div>
  <div class="blob"></div>
  <div class="blob"></div>
  <div class="blob"></div>
</div>

<div id="toasts"></div>

<main class="card">
  <h1>Get in Touch</h1>
  <p class="sub">Send me a message</p>

  <form id="form" autocomplete="off">
    <div class="field">
      <label for="name">Name <span class="opt">(optional)</span></label>
      <input type="text" id="name" name="name" placeholder="Your name">
    </div>

    <div class="field">
      <label for="message">Message</label>
      <textarea id="message" name="message" placeholder="What's on your mind?" required rows="4"></textarea>
    </div>

    <div class="turnstile-wrap">
      <div class="cf-turnstile" data-sitekey="0x4AAAAAACapx0s2o79saH1B"></div>
    </div>

    <button type="submit" id="submitBtn">Send Message</button>
  </form>
</main>

<script>
(function(){
  var form=document.getElementById("form");
  var btn=document.getElementById("submitBtn");
  var nameIn=document.getElementById("name");
  var msgIn=document.getElementById("message");

  function toast(type,text){
    var t=document.createElement("div");
    t.className="toast "+type;
    t.textContent=text;
    document.getElementById("toasts").appendChild(t);
    requestAnimationFrame(function(){requestAnimationFrame(function(){t.classList.add("show")})});
    setTimeout(function(){
      t.classList.remove("show");
      t.addEventListener("transitionend",function(){t.remove()},{once:true});
    },4000);
  }

  form.addEventListener("submit",async function(e){
    e.preventDefault();
    if(btn.disabled)return;

    var message=msgIn.value.trim();
    if(!message){toast("err","Please enter a message.");return}

    var el=document.querySelector('[name="cf-turnstile-response"]');
    var token=el?el.value:"";
    if(!token){toast("err","Please complete the verification.");return}

    btn.disabled=true;
    btn.textContent="Sending\u2026";

    try{
      var res=await fetch("/api/contact",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({name:nameIn.value.trim(),message:message,token:token})
      });
      var data=await res.json();

      if(data.success){
        toast("ok","Message sent successfully.");
        form.reset();
        if(window.turnstile)turnstile.reset();
      }else{
        toast("err","Verification failed or server error.");
      }
    }catch(err){
      toast("err","Something went wrong.");
    }

    btn.disabled=false;
    btn.textContent="Send Message";
  });
})();
</script>
</body>
</html>
